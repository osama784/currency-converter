<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø¹Ø¯ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f1f5f9;
            color: #1e293b;
            user-select: none;
        }
        .app-container {
            max-width: 500px;
            margin: 0 auto;
            padding: 1rem;
        }
        .glass-card {
            background: #ffffff;
            border-radius: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1.5rem;
            margin-bottom: 1.25rem;
            border: 1px solid #e2e8f0;
        }
        .btn-currency {
            transition: all 0.2s;
            touch-action: manipulation;
        }
        .btn-currency:active {
            transform: scale(0.92);
            background-color: #eff6ff;
        }
        .tab-active {
            background-color: #2563eb;
            color: white;
            border-radius: 0.75rem;
        }
        .suggestion-box {
            background-color: #fefce8;
            border: 1px dashed #facc15;
            padding: 1rem;
            border-radius: 1rem;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
        <header class="text-center py-4">
            <h1 class="text-3xl font-bold text-blue-600">Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©</h1>
            <p class="text-slate-500 text-sm">Ø­Ù„ Ø°ÙƒÙŠ Ù„Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ù‚Ø¯ÙŠÙ… ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯</p>
        </header>

        <!-- Ù‚Ø³Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± -->
        <div class="glass-card">
            <h2 class="text-lg font-bold mb-4 flex items-center text-blue-800">ğŸ”„ Ù…Ø­ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø©</h2>
            <div class="space-y-3">
                <div class="relative">
                    <label class="block text-[10px] font-bold text-slate-400 mr-1">Ù‚Ø¯ÙŠÙ… (Ù„ÙŠØ±Ø©)</label>
                    <input type="number" id="oldInput" oninput="syncOldToNew()" onfocus="this.select()" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù‚Ø¯ÙŠÙ…" 
                           class="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div class="relative">
                    <label class="block text-[10px] font-bold text-slate-400 mr-1">Ø¬Ø¯ÙŠØ¯ (Ù†Ù‚Ø¯)</label>
                    <input type="number" id="newInput" oninput="syncNewToOld()" onfocus="this.select()" placeholder="Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ù„Ø¬Ø¯ÙŠØ¯" 
                           class="w-full bg-blue-50 border border-blue-200 rounded-xl px-4 py-2 text-lg font-bold text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>
        </div>

        <!-- Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø°ÙƒÙŠ -->
        <div class="glass-card border-blue-200 bg-white">
            <h2 class="text-lg font-bold mb-3 flex items-center text-slate-700">ğŸ›’ Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹</h2>
            
            <!-- ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© -->
            <div class="flex bg-slate-100 p-1 rounded-xl mb-4">
                <button id="tabNew" onclick="setMode('new')" class="flex-1 py-2 text-sm font-bold tab-active">Ø·Ù„Ø¨ Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø¬Ø¯ÙŠØ¯</button>
                <button id="tabOld" onclick="setMode('old')" class="flex-1 py-2 text-sm font-bold text-slate-500">Ø·Ù„Ø¨ Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ù‚Ø¯ÙŠÙ…</button>
            </div>

            <div class="mb-4">
                <label id="labelRequired" class="block text-sm font-bold text-slate-600 mb-1">ÙƒÙ… Ø·Ù„Ø¨ Ù…Ù†Ùƒ Ø§Ù„Ø¨Ø§Ø¦Ø¹ØŸ</label>
                <input type="number" id="totalRequired" oninput="calculateDifference()" onfocus="this.select()" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ù‡Ù†Ø§" 
                       class="w-full border-2 border-blue-400 rounded-xl px-4 py-3 text-2xl font-bold focus:outline-none bg-blue-50 shadow-inner text-center">
            </div>

            <div class="grid grid-cols-2 gap-3 mb-4">
                <div class="bg-slate-50 p-3 rounded-xl border border-slate-200">
                    <label class="block text-[10px] font-bold text-slate-400 mb-1 uppercase">Ù…Ø¹ÙŠ Ù†Ù‚Ø¯ Ø¬Ø¯ÙŠØ¯</label>
                    <input type="number" id="walletNew" oninput="calculateDifference()" onfocus="this.select()" value="0" class="w-full text-lg font-bold text-green-600 focus:outline-none bg-transparent">
                </div>
                <div class="bg-slate-50 p-3 rounded-xl border border-slate-200">
                    <label class="block text-[10px] font-bold text-slate-400 mb-1 uppercase">Ù…Ø¹ÙŠ Ù„ÙŠØ±Ø© Ù‚Ø¯ÙŠÙ…Ø©</label>
                    <input type="number" id="walletOld" oninput="calculateDifference()" onfocus="this.select()" value="0" class="w-full text-lg font-bold text-orange-600 focus:outline-none bg-transparent">
                </div>
            </div>

            <!-- Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø­Ø³Ø¨Ø© ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„ -->
            <div id="resultBox" class="hidden space-y-3">
                <div id="resultColor" class="p-4 rounded-2xl text-center shadow-sm border-2">
                    <p id="resultStatus" class="font-bold text-xl mb-1"></p>
                    <div id="resultDetail" class="text-sm"></div>
                </div>

                <!-- Ù†ØµÙŠØ­Ø© Ø°ÙƒÙŠØ© -->
                <div id="smartSuggestion" class="suggestion-box">
                    <p class="font-bold text-blue-800 text-sm mb-1">ğŸ’¡ Ù†ØµÙŠØ­Ø© Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù„Ùƒ:</p>
                    <p id="suggestionText" class="text-sm text-blue-900 leading-relaxed"></p>
                </div>
            </div>
        </div>

        <!-- ÙØ¦Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø© -->
        <div class="glass-card">
            <h2 class="text-sm font-bold text-slate-500 mb-3 text-center italic">Ø§Ø¶ØºØ· Ù„Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø¯ Ø¬Ø¯ÙŠØ¯ Ù„Ù…Ø­ÙØ¸ØªÙƒ</h2>
            <div class="grid grid-cols-3 gap-2">
                <button onclick="addCoin(10)" class="btn-currency bg-slate-50 border border-slate-200 py-3 rounded-xl font-bold text-blue-700">10</button>
                <button onclick="addCoin(25)" class="btn-currency bg-slate-50 border border-slate-200 py-3 rounded-xl font-bold text-blue-700">25</button>
                <button onclick="addCoin(50)" class="btn-currency bg-slate-50 border border-slate-200 py-3 rounded-xl font-bold text-blue-700">50</button>
                <button onclick="addCoin(100)" class="btn-currency bg-white border-2 border-blue-100 py-3 rounded-xl font-bold text-blue-700">100</button>
                <button onclick="addCoin(200)" class="btn-currency bg-white border-2 border-blue-100 py-3 rounded-xl font-bold text-blue-700">200</button>
                <button onclick="addCoin(500)" class="btn-currency bg-white border-2 border-blue-100 py-3 rounded-xl font-bold text-blue-700">500</button>
            </div>
            <button onclick="clearWallet()" class="w-full mt-4 text-xs text-red-500 font-bold underline">ØªØµÙÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</button>
        </div>

        <footer class="text-center pb-6">
            <div class="inline-block px-6 py-2 bg-blue-600 text-white rounded-full shadow-lg">
                <p class="text-xs font-bold">ØªØµÙ…ÙŠÙ…: Ù…Ø­Ù…Ø¯ Ù‡ÙˆÙŠØ¯ÙŠ</p>
            </div>
        </footer>
    </div>

    <script>
        let currentMode = 'new'; 

        function setMode(mode) {
            currentMode = mode;
            document.getElementById('tabNew').className = mode === 'new' ? 'flex-1 py-2 text-sm font-bold tab-active' : 'flex-1 py-2 text-sm font-bold text-slate-500';
            document.getElementById('tabOld').className = mode === 'old' ? 'flex-1 py-2 text-sm font-bold tab-active' : 'flex-1 py-2 text-sm font-bold text-slate-500';
            document.getElementById('labelRequired').innerText = mode === 'new' ? "ÙƒÙ… Ø·Ù„Ø¨ Ù…Ù†Ùƒ Ø§Ù„Ø¨Ø§Ø¦Ø¹ (Ø¨Ø§Ù„Ø¬Ø¯ÙŠØ¯)ØŸ" : "ÙƒÙ… Ø·Ù„Ø¨ Ù…Ù†Ùƒ Ø§Ù„Ø¨Ø§Ø¦Ø¹ (Ø¨Ø§Ù„Ù‚Ø¯ÙŠÙ…)ØŸ";
            calculateDifference();
        }

        function syncOldToNew() {
            const oldVal = document.getElementById('oldInput').value;
            document.getElementById('newInput').value = oldVal ? (parseFloat(oldVal) / 100) : "";
        }

        function syncNewToOld() {
            const newVal = document.getElementById('newInput').value;
            document.getElementById('oldInput').value = newVal ? (parseFloat(newVal) * 100) : "";
        }

        function addCoin(val) {
            const wallet = document.getElementById('walletNew');
            wallet.value = parseFloat(wallet.value || 0) + val;
            calculateDifference();
        }

        function clearWallet() {
            document.getElementById('walletNew').value = 0;
            document.getElementById('walletOld').value = 0;
            document.getElementById('totalRequired').value = "";
            document.getElementById('resultBox').classList.add('hidden');
        }

        function calculateDifference() {
            const requiredInput = parseFloat(document.getElementById('totalRequired').value) || 0;
            const hasNew = parseFloat(document.getElementById('walletNew').value) || 0;
            const hasOld = parseFloat(document.getElementById('walletOld').value) || 0;

            const reqInNew = currentMode === 'new' ? requiredInput : (requiredInput / 100);
            const reqInOld = currentMode === 'old' ? requiredInput : (requiredInput * 100);
            
            const totalInNew = hasNew + (hasOld / 100);
            const diffNew = totalInNew - reqInNew;

            const box = document.getElementById('resultBox');
            if (requiredInput === 0 && totalInNew === 0) {
                box.classList.add('hidden');
                return;
            }
            box.classList.remove('hidden');

            const status = document.getElementById('resultStatus');
            const color = document.getElementById('resultColor');
            const detail = document.getElementById('resultDetail');
            const suggestionText = document.getElementById('suggestionText');

            if (diffNew >= 0) {
                color.className = "p-4 rounded-2xl text-center bg-green-50 border-green-200 text-green-800 shadow-sm border-2";
                status.innerText = "Ø§Ù„Ù…Ø¨Ù„Øº Ù…ØªÙˆÙØ± âœ…";
                detail.innerHTML = `Ù…Ø¹Ùƒ Ù…Ø§ ÙŠØ¹Ø§Ø¯Ù„ <b>${totalInNew.toFixed(2)} Ù†Ù‚Ø¯</b><br>Ø§Ù„Ø¨Ø§Ù‚ÙŠ Ù„Ùƒ: <b>${diffNew.toFixed(2)} Ù†Ù‚Ø¯</b> (Ø£Ùˆ ${Math.round(diffNew*100)} Ù‚Ø¯ÙŠÙ…)`;
                
                if (currentMode === 'old') {
                    suggestionText.innerHTML = `Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø·Ù„Ø¨ <b>${requiredInput} Ù„ÙŠØ±Ø© Ù‚Ø¯ÙŠÙ…Ø©</b>. Ø£ÙØ¶Ù„ Ø´ÙŠØ¡ Ù‡Ùˆ Ø£Ù† ØªØ¹Ø·ÙŠÙ‡ <b>${reqInNew.toFixed(2)} Ù…Ù† Ø§Ù„Ù†Ù‚Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯</b> ÙˆØ³ÙŠÙƒÙˆÙ† Ø­Ø³Ø§Ø¨Ùƒ Ø®Ø§Ù„ØµØ§Ù‹ ØªÙ…Ø§Ù…Ø§Ù‹.`;
                } else {
                    suggestionText.innerHTML = `Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø·Ù„Ø¨ <b>${requiredInput} Ù†Ù‚Ø¯ Ø¬Ø¯ÙŠØ¯</b>. Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø¹Ùƒ "ÙØ±Ø§Ø·Ø©" Ø¬Ø¯ÙŠØ¯Ø©ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø·Ø§Ø¤Ù‡ <b>${reqInOld} Ù…Ù† Ø§Ù„Ù„ÙŠØ±Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©</b> ÙˆØ³ÙŠÙƒÙˆÙ† Ø­Ø³Ø§Ø¨Ùƒ Ø®Ø§Ù„ØµØ§Ù‹.`;
                }
            } else {
                color.className = "p-4 rounded-2xl text-center bg-red-50 border-red-200 text-red-800 shadow-sm border-2";
                status.innerText = "Ø§Ù„Ù…Ø¨Ù„Øº Ù†Ø§Ù‚Øµ âŒ";
                const shortageNew = Math.abs(diffNew);
                const shortageOld = Math.round(shortageNew * 100);
                detail.innerHTML = `ÙŠÙ†Ù‚ØµÙƒ: <b>${shortageNew.toFixed(2)} Ù†Ù‚Ø¯ Ø¬Ø¯ÙŠØ¯</b><br>(Ø£ÙŠ Ù…Ø§ ÙŠØ¹Ø§Ø¯Ù„ ${shortageOld} Ù„ÙŠØ±Ø© Ù‚Ø¯ÙŠÙ…Ø©)`;
                suggestionText.innerHTML = `Ø§Ø¨Ø­Ø« ÙÙŠ Ø¬ÙŠØ¨Ùƒ Ø¹Ù† <b>${shortageNew.toFixed(2)} Ù†Ù‚Ø¯ Ø¬Ø¯ÙŠØ¯</b> Ø¥Ø¶Ø§ÙÙŠØŒ Ø£Ùˆ ÙˆØ±Ù‚Ø© <b>${shortageOld} Ù„ÙŠØ±Ø© Ù‚Ø¯ÙŠÙ…Ø©</b> Ù„ØªÙƒÙ…Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨.`;
            }
        }
    </script>
</body>
</html>